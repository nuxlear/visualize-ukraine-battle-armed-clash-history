<!DOCTYPE html>
<html>
    <head>
        <title>Russian Invasion of Ukraine in 2022</title>
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/d3-geo@3"></script>
        <script src="https://unpkg.com/topojson@3"></script>

        <script src="components/map.js"></script>
    </head>

    <body>
        <div style="border: 5px">
            <svg id="map"></svg>
        </div>
        
        <script>
            var width = 1440;
            var height = 900;
            
            var svg = d3.select('#map')
                .attr('width', width)
                .attr('height', height);
            var g = svg.append('g')
                .attr('width', width)
                .attr('height', height);
            
            var projection = d3.geoMercator()
                .center([32, 49])
                .scale(2800)
                .translate([width / 2, height / 2]);
            var path = d3.geoPath()
                .projection(projection);

            svg.call(
                d3.zoom().on('zoom', ({ transform }) => {
                    g.attr('transform', transform);
                })
            );
            
            d3.json('https://raw.githubusercontent.com/org-scn-design-studio-community/sdkcommunitymaps/master/geojson/Europe/Ukraine-regions.json').then(
                data => {
                    const regions = topojson.feature(data, data.objects.UKR_adm1);

                    g.selectAll('path')
                        .data(regions.features)
                        .enter()
                        .append('path')
                        .attr('d', path)
                        .attr('fill', 'grey')
                        .attr('stroke', 'white')
                        .attr('stroke-width', '1')
                        .append('title') // Add a tooltop
                        .text(d => d.properties.NAME_1)
                        .on('mouseover', 
                        d => {
                            d.attr('fill', 'red');
                        });
                }
            )
        </script>
    </body>
</html>